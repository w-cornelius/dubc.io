<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dubhub</title>
    
    <!-- Keywords -->
    <meta name="keywords" content="dub, dubb, dubbb, dubbb_, dubc, dubhub, dubbb_c, social, links, dj, gaming, music, content creator, gta rp, discord, ai, chatbot">
    
    <!-- Favicon Configuration -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="android-chrome-512x512.png">
    <link rel="shortcut icon" href="favicon.ico">
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* General Body Styling & Font */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
        }

        /* --- Radiating Background Animation --- */
        body::before {
            content: '';
            position: fixed;
            z-index: -1;
            top: 50%;
            left: 50%;
            width: 80vmax; /* Concentrated the glow */
            height: 80vmax; /* Concentrated the glow */
            border-radius: 50%;
            background-color: rgba(120, 50, 220, 0.25); /* Gloss midnight purple */
            animation: radiate 8s ease-in-out infinite;
            filter: blur(100px); /* Slightly less blur for a more defined feel */
        }

        @keyframes radiate {
            0%, 100% {
                transform: translate(-50%, -50%) scale(0.95);
                opacity: 0.9;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 1;
            }
        }

        /* --- Glassmorphism Effect --- */
        .glassmorphic {
            background: rgba(10, 10, 10, 0.5);
            -webkit-backdrop-filter: blur(12px);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        /* --- Entrance Animations --- */
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fade-slide-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fade-in 0.8s ease-out forwards;
        }
        .animate-fade-slide-up {
            opacity: 0; /* Start hidden */
            animation: fade-slide-up 0.6s ease-out forwards;
        }

        /* --- Enhanced Link/Button Styling --- */
        .social-link {
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .social-link:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.1);
        }

        /* Shimmer effect on hover */
        .social-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -150%;
            width: 75%;
            height: 100%;
            background: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0) 100%);
            transform: skewX(-25deg);
            transition: left 0.6s ease;
        }
        .social-link:hover::before {
            left: 150%;
        }

        /* Modal Scrollbar */
        #modal-content .p-6::-webkit-scrollbar { width: 8px; }
        #modal-content .p-6::-webkit-scrollbar-track { background: #2d3748; }
        #modal-content .p-6::-webkit-scrollbar-thumb { background-color: #4a5568; border-radius: 4px; border: 2px solid #2d3748; }
        #modal-content .p-6::-webkit-scrollbar-thumb:hover { background: #718096; }
    </style>
</head>
<body class="text-white antialiased">

    <!-- Main Container -->
    <div class="relative min-h-screen flex flex-col items-center justify-center p-4">
        
        <div class="relative z-10 w-full max-w-lg mx-auto pt-10 pb-24">
            
            <!-- Profile Section -->
            <header class="text-center mb-10 animate-fade-in">
                <img 
                    src="avatar1.png" 
                    alt="dubbb_c Avatar" 
                    class="w-32 h-32 rounded-full mx-auto mb-5 border-4 border-white/20 shadow-2xl"
                    onerror="this.onerror=null;this.src='https://placehold.co/128x128/1a202c/9ca3af?text=Error';"
                >
                <h1 class="text-4xl font-bold text-white tracking-tight">dubbb_c</h1>
                <p id="streamer-bio" class="text-gray-300 mt-2 text-lg">Content Creator | DJ | Semi-Pro Gamer</p>
            </header>

            <!-- Main Links Section -->
            <main class="space-y-4">

                <!-- Ask Dub (AI) -->
                <button id="ask-ai-btn" class="social-link group flex items-center p-4 glassmorphic rounded-xl w-full text-white animate-fade-slide-up" style="animation-delay: 0.1s;">
                    <svg class="w-6 h-6 mr-4 text-teal-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.5a.75.75 0 01.75.75v.31a10.493 10.493 0 015.484 2.836.75.75 0 01-.976 1.138 9.001 9.001 0 00-10.517 0 .75.75 0 01-.976-1.138A10.493 10.493 0 0111.25 3.56V3.25a.75.75 0 01.75-.75zM7.757 8.243a.75.75 0 011.06 0l1.158 1.158a.75.75 0 010 1.06l-1.158 1.159a.75.75 0 01-1.06-1.061l.628-.629-.628-.628a.75.75 0 010-1.06zM12 8.25a.75.75 0 01.75.75v3a.75.75 0 01-1.5 0v-3a.75.75 0 01.75-.75zm4.183.993a.75.75 0 010 1.06l-.628.628.628.629a.75.75 0 11-1.06 1.06l-1.159-1.158a.75.75 0 010-1.061l1.159-1.158a.75.75 0 011.06 0zM12 15.75a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM5.75 18a.75.75 0 00-.75.75v.31a10.493 10.493 0 005.484 2.836.75.75 0 10.582-1.322 9 9 0 01-4.823-2.574V18.75a.75.75 0 00-.5-.75zm12.5 0a.75.75 0 00-.5.75v.25a9 9 0 01-4.823 2.574.75.75 0 10.582 1.322A10.493 10.493 0 0018.25 19.06v-.31a.75.75 0 00-.75-.75z"></path></svg>
                    <span class="font-semibold text-lg flex-grow text-left">Ask Dub (AI)</span>
                </button>
                
                 <!-- Discord -->
                 <a href="https://discord.gg/hHzJp9zH9W" target="_blank" rel="noopener noreferrer" class="social-link group flex items-center p-4 glassmorphic rounded-xl w-full animate-fade-slide-up" style="animation-delay: 0.2s;">
                     <img src="discord-icon-360x360.png" alt="Discord Icon" class="w-6 h-6 mr-4" width="360" height="360">
                     <span class="font-semibold text-lg flex-grow text-left">Discord</span>
                 </a>

                 <!-- Gaming -->
                 <a href="gaming.html" class="social-link group flex items-center p-4 glassmorphic rounded-xl w-full animate-fade-slide-up" style="animation-delay: 0.3s;">
                    <img src="gaming-icon-360x360.png" alt="Gaming Icon" class="w-6 h-6 mr-4" width="360" height="360">
                    <span class="font-semibold text-lg flex-grow text-left">Gaming</span>
                 </a>

                 <!-- Music -->
                 <a href="music.html" class="social-link group flex items-center p-4 glassmorphic rounded-xl w-full animate-fade-slide-up" style="animation-delay: 0.4s;">
                    <img src="dj-icon-360x360.png" alt="Music Icon" class="w-6 h-6 mr-4" width="360" height="360">
                    <span class="font-semibold text-lg flex-grow text-left">Music</span>
                 </a>
                
                 <!-- Other -->
                 <a href="other.html" class="social-link group flex items-center p-4 glassmorphic rounded-xl w-full animate-fade-slide-up" style="animation-delay: 0.5s;">
                    <img src="other-icon-360x360.png" alt="Other Icon" class="w-6 h-6 mr-4" width="360" height="360">
                    <span class="font-semibold text-lg flex-grow text-left">Other</span>
                 </a>
            </main>

            <!-- Collapsible Discord Widget Section -->
            <section class="mt-10 animate-fade-slide-up" style="animation-delay: 0.6s;">
                <button id="toggle-discord-widget" class="social-link group flex items-center justify-between w-full text-left p-4 glassmorphic rounded-xl">
                    <h2 class="text-xl font-bold">Join the Community</h2>
                    <div class="flex items-center">
                        <svg id="discord-chevron" class="w-6 h-6 transform transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                </button>
                <div id="discord-widget-container" class="mt-2 rounded-lg overflow-hidden shadow-lg mx-auto transition-all duration-500 ease-in-out max-h-0 opacity-0">
                    <iframe 
                        src="https://discord.com/widget?id=1207044666613305394&theme=dark" 
                        class="w-full" 
                        height="500" 
                        allowtransparency="true" 
                        frameborder="0" 
                        sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts">
                    </iframe>
                </div>
            </section>

        </div>
        
        <!-- Footer -->
        <footer class="absolute bottom-6 w-full text-center text-gray-500 text-sm animate-fade-in z-20" style="animation-delay: 0.7s;">
            <p>&copy; 2025 dubbb_c. All Rights Reserved.</p>
            <div class="flex justify-center space-x-4 mt-1">
                <a href="/security.html" class="hover:text-white transition-colors">Security</a>
                <a href="hall-of-fame.html" class="hover:text-white transition-colors">Hall of Fame</a>
            </div>
        </footer>

    </div>

    <!-- AI Modal -->
    <div id="ai-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 hidden transition-opacity duration-300 opacity-0">
        <div class="glassmorphic rounded-2xl shadow-2xl w-full max-w-lg transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
            <!-- Modal Header -->
            <div class="flex items-center justify-between p-4 border-b border-white/10">
                <h3 class="text-xl font-bold" id="modal-title">âœ¨ Ask Dub (AI)</h3>
                <button id="close-modal-btn" class="text-gray-400 hover:text-white text-3xl leading-none">&times;</button>
            </div>
            <!-- Modal Body -->
            <div class="p-6 max-h-[60vh] overflow-y-auto">
                <div class="space-y-4">
                    <input type="text" id="ai-question-input" placeholder="e.g., What games do you play?" class="w-full p-3 bg-black/30 rounded-lg border border-white/20 focus:outline-none focus:ring-2 focus:ring-teal-500">
                    <button id="submit-ai-question-btn" class="w-full px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors duration-300 font-semibold">Get Answer</button>
                </div>
                <div id="modal-loader" class="flex justify-center items-center h-32 hidden mt-4">
                    <svg class="animate-spin h-10 w-10 text-purple-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
Next token: </svg>
                </div>
                <div id="modal-result-container" class="mt-4 hidden">
                    <p id="modal-text" class="text-gray-300 text-base whitespace-pre-wrap bg-black/20 p-4 rounded-lg"></p>
                </div>
            </div>
            <!-- Modal Footer -->
            <div id="modal-footer" class="flex justify-end p-4 border-t border-white/10 hidden">
                <button id="copy-btn" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-300">Copy Text</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Element Selectors ---
            const toggleDiscordBtn = document.getElementById('toggle-discord-widget');
            const discordWidgetContainer = document.getElementById('discord-widget-container');
            const discordChevron = document.getElementById('discord-chevron');
            const askAiBtn = document.getElementById('ask-ai-btn');
            const aiModal = document.getElementById('ai-modal');
            const modalContent = document.getElementById('modal-content');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const aiQuestionInput = document.getElementById('ai-question-input');
            const submitAiQuestionBtn = document.getElementById('submit-ai-question-btn');
            const modalLoader = document.getElementById('modal-loader');
            const modalResultContainer = document.getElementById('modal-result-container');
            const modalText = document.getElementById('modal-text');
            const modalFooter = document.getElementById('modal-footer');
            const copyBtn = document.getElementById('copy-btn');

            // --- Modal Control Functions ---
            const showModal = () => {
                aiModal.classList.remove('hidden', 'opacity-0');
                setTimeout(() => {
                    modalContent.classList.remove('opacity-0', 'scale-95');
                }, 10);
            };

            const hideModal = () => {
                modalContent.classList.add('opacity-0', 'scale-95');
                setTimeout(() => {
                    aiModal.classList.add('hidden', 'opacity-0');
                    modalResultContainer.classList.add('hidden');
                    modalLoader.classList.add('hidden');
                    aiQuestionInput.value = '';
                }, 300);
            };
            
            const showLoader = () => {
                modalLoader.classList.remove('hidden');
                modalResultContainer.classList.add('hidden');
                modalFooter.classList.add('hidden');
            };

            const showResult = (text) => {
                modalLoader.classList.add('hidden');
                modalText.innerText = text;
                modalResultContainer.classList.remove('hidden');
                modalFooter.classList.remove('hidden');
            };

            // --- Gemini API Call via Secure Worker ---
            async function callGemini(prompt) {
                const apiUrl = 'https://dubbc-ai-proxy.wcornelius.workers.dev/';
                const payload = { prompt: prompt };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error(`API call failed with status: ${response.status}`);
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0) {
                        return result.candidates[0].content.parts[0].text.trim();
                    } else {
                        throw new Error('Unexpected API response format');
                    }
                } catch (error) {
                    console.error('Error calling the proxy worker:', error);
                    return `An error occurred: ${error.message}. Please try again later.`;
                }
            }

            // --- Event Handlers ---
            if(askAiBtn) {
                askAiBtn.addEventListener('click', showModal);
            }

            if(submitAiQuestionBtn) {
                submitAiQuestionBtn.addEventListener('click', async () => {
                    const question = aiQuestionInput.value;
                    if (!question.trim()) {
                        showResult('Please enter a question.');
                        return;
                    }
                    showLoader();
                    const fullPrompt = `You are a helpful, friendly AI assistant for the streamer 'dubbb_c'. Your knowledge base includes: he streams on Twitch (dubbb_c and djdubc_), Kick (dubbb_c), and has content on YouTube, TikTok, Instagram, and SoundCloud. He co-hosts 'The Punchline & The Pause' podcast. You are omnisicient and very knowledgable about many things and can help fans with questions other than what concerns the streamer. Answer the fan's question concisely: "${question}"`;
                    const resultText = await callGemini(fullPrompt);
                    showResult(resultText);
                });
            }
            
            if(aiQuestionInput) {
                aiQuestionInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') submitAiQuestionBtn.click();
                });
            }

            if(closeModalBtn) {
                closeModalBtn.addEventListener('click', hideModal);
            }
            
            if(aiModal) {
                aiModal.addEventListener('click', (e) => {
                    if (e.target === aiModal) hideModal();
                });
            }

            // --- Discord Widget Toggle ---
            if(toggleDiscordBtn) {
                toggleDiscordBtn.addEventListener('click', () => {
                    const isExpanded = discordWidgetContainer.classList.toggle('expanded');
                    if (isExpanded) {
                        discordWidgetContainer.style.maxHeight = '500px';
                        discordWidgetContainer.style.opacity = '1';
                    } else {
                        discordWidgetContainer.style.maxHeight = '0';
                        discordWidgetContainer.style.opacity = '0';
                    }
                    discordChevron.classList.toggle('rotate-180', isExpanded);
                });
            }

            // --- Utility Functions ---
            if(copyBtn) {
                copyBtn.addEventListener('click', () => {
                    // Using a temporary textarea for broader compatibility
                    const textArea = document.createElement("textarea");
                    textArea.value = modalText.innerText;
                    document.body.appendChild(textArea);
                    textArea.select();
                    try {
                        document.execCommand('copy');
                        copyBtn.innerText = 'Copied!';
                        setTimeout(() => { copyBtn.innerText = 'Copy Text'; }, 2000);
                    } catch (err) {
                        console.error('Fallback: Oops, unable to copy', err);
                    }
                    document.body.removeChild(textArea);
                });
            }
        });
    </script>
</body>
</html>
